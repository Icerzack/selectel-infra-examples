Index: README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># Selectel terraform modules example\n\n\n> Для работы с облачными ресурсами в Selectel через `terraform` будет не лишним ознакомиться с документацией по работе с `terraform providers openstack/selectel` на [офф. странице.](https://docs.selectel.ru/terraform/)\n\nВ данном репозитории находяться примеры terraform модулей, используемых для создания инфраструктуры в облаке Selectel.\n\n## Usage\n\n1. Инициализировать terraform backend\n```bash\nterraform init\n```\n\n2. Создать файл `main.tf`,  где описана необходимая инфраструктура (пример ниже - создание `simple file storage`)\n```yaml\nmodule \"sfs\" {\n  source               = \"modules/sfs\"\n  os_network_id        = var.nat_network_id\n  os_subnet_id         = var.nat_subnet_id\n  sfs_size             = var.sfs_size\n  sfs_volume_type      = var.sfs_volume_type\n  os_availability_zone = var.os_availability_zone\n}\n```\n\n3. Для проверки и применения настроек необходимо запустить команды `terraform plan/apply`\n```bash\nterraform plan\nterraform apply\n```\n\n## Repository structure\n\n### Modules\n\n  * [craas](modules/craas) - создание [Container as a Service](https://selectel.ru/services/cloud/container-registry/)\n  * [flavor](modules/flavor) - создание flavor (тип инстанса)\n  * [floatingip](modules/floatingip) - создание плавающего ip адреса\n  * [image_datasource](modules/image_datasource) - считывание айдишника образа\n  * [keypair](modules/keypair) - создание ключевой пары для подключения по ssh\n  * [mks](modules/mks) - набор модулей для создания [Selectel Managed Kubernetes](https://selectel.ru/services/cloud/kubernetes/)\n    * [k8s-cluster](modules/mks/k8s-cluster) - создание master ноды k8s\n    * [k8s-cluster-standalone](modules/mks/k8s-cluster-standalone) - создание managed kubernetes кластера\n    * [k8s-nodegroup](modules/mks/k8s-nodegroup) - создание compute ноды k8s\n    * [k8s-nodegroup-gpu](modules/mks/k8s-nodegroup-gpu) - создание compute ноды с gpu k8s\n  * [nat](modules/nat) - создание nat сет\n  * [os_project_with_user](modules/os_project_with_user) - создание проекта в облаке selectel\n  * [s3](modules/s3) - создание [объектного хранилища s3](https://selectel.ru/services/cloud/storage/)\n    * [s3](modules/s3-bucket) - создание s3 бакета\n    * [s3](modules/s3-credentioals) - создание s3 параметров авторизации\n  * [selectel-token](modules/selectel) - создание токена аккаунта selectel\n  * [sfs](modules/sfs) - создание [файлового хранилища](https://selectel.ru/lab/file-storage/)\n  * [vm](modules/vm) - создание [виртуального облачного сервера](https://selectel.ru/services/cloud/servers/)\n  * [volume](modules/volume) - создание облачного диска
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/README.md b/README.md
--- a/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/README.md	(date 1703670370005)
@@ -1,4 +1,4 @@
-# Selectel terraform modules example
+# Selectel infra terraform modules example
 
 
 > Для работы с облачными ресурсами в Selectel через `terraform` будет не лишним ознакомиться с документацией по работе с `terraform providers openstack/selectel` на [офф. странице.](https://docs.selectel.ru/terraform/)
@@ -30,6 +30,31 @@
 terraform apply
 ```
 
+## Example of usage
+
+В репозитории можно найти пример использования модулей. В корне репозитория созданы `*.tf` файлы которые можно использовать как пример вызова модулей.
+
+Для их использования достаточно перейти в корень репозитория и инициализоровать terraform:
+
+```bash
+terraform init
+```
+
+Далее можно скорректировать некоторые параметры в файле `main.tf`, которые передаются в модули, например объем sfs, имя кластера и другие.
+
+Теперь можно выполнять комадны `terraform plan/apply`, но чтобы terraform знал где именно ему все это добро запускать, необходимо указать значения переменных `selectel_domain_name`, `selectel_user_admin_user`, `selectel_user_admin_password`. К слову при вызове команд `terraform plan/apply` будет предложены ввести значения для данных переменных.
+
+Приведу пример команды для запуска команды `terraform plan` и указанием `env` переменных перед командой:
+
+```bash
+TF_VAR_selectel_domain_name=<Selectel аккаунт ID> \
+TF_VAR_selectel_user_admin_user=<Имя сервисного пользователя с нужными правами> \
+TF_VAR_selectel_user_admin_password=<Пароль от сервисного пользователя> \
+terraform plan
+```
+
+После успешного выполнения 
+
 ## Repository structure
 
 ### Modules
Index: modules/os_project/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/os_project/README.md b/modules/os_project/README.md
new file mode 100644
--- /dev/null	(date 1703674921738)
+++ b/modules/os_project/README.md	(date 1703674921738)
@@ -0,0 +1,35 @@
+## Requirements
+
+| Name | Version |
+|------|---------|
+| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
+| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.1 |
+
+## Providers
+
+| Name | Version |
+|------|---------|
+| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.1 |
+
+## Modules
+
+No modules.
+
+## Resources
+
+| Name | Type |
+|------|------|
+| [selectel_vpc_project_v2.project_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/vpc_project_v2) | resource |
+
+## Inputs
+
+| Name | Description | Type | Default | Required |
+|------|-------------|------|---------|:--------:|
+| <a name="input_os_project_name"></a> [os\_project\_name](#input\_os\_project\_name) | Name of OpenStack project to create | `string` | n/a | yes |
+
+## Outputs
+
+| Name | Description |
+|------|-------------|
+| <a name="output_project_id"></a> [project\_id](#output\_project\_id) | ID of created project |
+| <a name="output_project_name"></a> [project\_name](#output\_project\_name) | Name of created project |
Index: modules/sfs/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/sfs/versions.tf b/modules/sfs/versions.tf
--- a/modules/sfs/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/sfs/versions.tf	(date 1703609108035)
@@ -2,7 +2,7 @@
   required_providers {
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/os_project/vars.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/os_project/vars.tf b/modules/os_project/vars.tf
new file mode 100644
--- /dev/null	(date 1703612440944)
+++ b/modules/os_project/vars.tf	(date 1703612440944)
@@ -0,0 +1,4 @@
+variable "os_project_name" {
+  description = "Name of OpenStack project to create"
+  type        = string
+}
Index: modules/os_project/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/os_project/versions.tf b/modules/os_project/versions.tf
new file mode 100644
--- /dev/null	(date 1703612440934)
+++ b/modules/os_project/versions.tf	(date 1703612440934)
@@ -0,0 +1,9 @@
+terraform {
+  required_providers {
+    selectel = {
+      source  = "selectel/selectel"
+      version = ">= 4.0.1"
+    }
+  }
+  required_version = ">= 1.5.0"
+}
Index: modules/os_project/outputs.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/os_project/outputs.tf b/modules/os_project/outputs.tf
new file mode 100644
--- /dev/null	(date 1703612440937)
+++ b/modules/os_project/outputs.tf	(date 1703612440937)
@@ -0,0 +1,9 @@
+output "project_id" {
+  description = "ID of created project"
+  value       = selectel_vpc_project_v2.project_1.id
+}
+
+output "project_name" {
+  description = "Name of created project"
+  value       = selectel_vpc_project_v2.project_1.name
+}
Index: modules/os_project/main.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/os_project/main.tf b/modules/os_project/main.tf
new file mode 100644
--- /dev/null	(date 1703612440931)
+++ b/modules/os_project/main.tf	(date 1703612440931)
@@ -0,0 +1,3 @@
+resource "selectel_vpc_project_v2" "project_1" {
+  name = var.os_project_name
+}
Index: modules/sfs/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!-- BEGIN_TF_DOCS -->\n## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_openstack\"></a> [openstack](#provider\\_openstack) | 1.46.0 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| openstack_sharedfilesystem_share_access_v2.share_access_1 | resource |\n| openstack_sharedfilesystem_share_v2.sfs_share | resource |\n| openstack_sharedfilesystem_sharenetwork_v2.sfs_sharenetwork | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_nat_subnet_cidr\"></a> [nat\\_subnet\\_cidr](#input\\_nat\\_subnet\\_cidr) | Subnet, which will be able to access SFS | `string` | `\"10.222.0.0/16\"` | no |\n| <a name=\"input_os_availability_zone\"></a> [os\\_availability\\_zone](#input\\_os\\_availability\\_zone) | Zone, where SFS will be deployed | `string` | `\"ru-7a\"` | no |\n| <a name=\"input_os_network_id\"></a> [os\\_network\\_id](#input\\_os\\_network\\_id) | Network, where SFS will be deployed | `string` | n/a | yes |\n| <a name=\"input_os_subnet_id\"></a> [os\\_subnet\\_id](#input\\_os\\_subnet\\_id) | Subnet, where SFS will be deployed | `string` | n/a | yes |\n| <a name=\"input_sfs_name_prefix\"></a> [sfs\\_name\\_prefix](#input\\_sfs\\_name\\_prefix) | Prefix of all SFS resources | `string` | `\"cmlp\"` | no |\n| <a name=\"input_sfs_proto\"></a> [sfs\\_proto](#input\\_sfs\\_proto) | SFS proto | `string` | `\"NFS\"` | no |\n| <a name=\"input_sfs_size\"></a> [sfs\\_size](#input\\_sfs\\_size) | SFS size | `number` | `50` | no |\n| <a name=\"input_sfs_volume_type\"></a> [sfs\\_volume\\_type](#input\\_sfs\\_volume\\_type) | SFS volume type | `string` | `\"basic\"` | no |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_sfs_address\"></a> [sfs\\_address](#output\\_sfs\\_address) | SFS path |\n| <a name=\"output_sfs_addressess\"></a> [sfs\\_addressess](#output\\_sfs\\_addressess) | SFS paths array. For debug purposes |\n<!-- END_TF_DOCS -->
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/sfs/README.md b/modules/sfs/README.md
--- a/modules/sfs/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/sfs/README.md	(date 1703674945105)
@@ -1,16 +1,15 @@
-<!-- BEGIN_TF_DOCS -->
 ## Requirements
 
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.46.0 |
+| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.53.0 |
 
 ## Modules
 
@@ -20,9 +19,9 @@
 
 | Name | Type |
 |------|------|
-| openstack_sharedfilesystem_share_access_v2.share_access_1 | resource |
-| openstack_sharedfilesystem_share_v2.sfs_share | resource |
-| openstack_sharedfilesystem_sharenetwork_v2.sfs_sharenetwork | resource |
+| [openstack_sharedfilesystem_share_access_v2.share_access_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/sharedfilesystem_share_access_v2) | resource |
+| [openstack_sharedfilesystem_share_v2.sfs_share](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/sharedfilesystem_share_v2) | resource |
+| [openstack_sharedfilesystem_sharenetwork_v2.sfs_sharenetwork](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/sharedfilesystem_sharenetwork_v2) | resource |
 
 ## Inputs
 
@@ -43,4 +42,3 @@
 |------|-------------|
 | <a name="output_sfs_address"></a> [sfs\_address](#output\_sfs\_address) | SFS path |
 | <a name="output_sfs_addressess"></a> [sfs\_addressess](#output\_sfs\_addressess) | SFS paths array. For debug purposes |
-<!-- END_TF_DOCS -->
\ No newline at end of file
Index: main.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/main.tf b/main.tf
new file mode 100644
--- /dev/null	(date 1703675114079)
+++ b/main.tf	(date 1703675114079)
@@ -0,0 +1,119 @@
+# Запуск модулей
+
+# Создаем проект с пользователем
+# данный модуль создать проект/пользователя и креды для него
+module "project-with-user" {
+  source          = "./modules/os_project_with_user"
+  os_project_name = "gh_test_tf_modules"
+  os_username     = "gh_test_tf_user"
+}
+
+# Создаём виртуалку и все что необходимо для ее работы
+module "vm" {
+  source              = "./modules/vm"
+  os_region           = "ru-9"
+  os_zone             = "ru-9a"
+  vm_name             = "test-vm"
+  server_root_disk_gb = ["10"]
+  vm_vcpus            = 4
+  vm_ram_mb           = 4096
+  enable_dhcp         = true
+
+  depends_on = [
+    module.project-with-user
+  ]
+}
+
+# Создаём simple file storage в ту же сеть что и виртуальная машина
+module "sfs" {
+  source               = "./modules/sfs"
+  os_availability_zone = "ru-9a"
+  sfs_size             = 70
+  sfs_volume_type      = "basic"
+  os_network_id        = module.vm.nat_net_id
+  os_subnet_id         = module.vm.nat_sub_id
+
+  depends_on = [
+    module.project-with-user
+  ]
+}
+
+# S3 нет в провайдере selectel, поэтому под капотом terracurl
+
+# Создаём S3-ключ для пользователя
+module "s3-creds" {
+  source           = "./modules/s3/s3-credentials"
+  os_account       = var.selectel_domain_name
+  os_username      = var.selectel_user_admin_user
+  os_password      = var.selectel_user_admin_password
+  os_user_id       = module.project-with-user.user_id
+  os_project_id    = module.project-with-user.project_id
+  credentials_name = "gh-s3-cred"
+
+  depends_on = [
+    module.project-with-user
+  ]
+}
+
+# Создаём s3 bucket
+module "s3-bucket" {
+  source          = "./modules/s3/s3-bucket"
+  os_account      = var.selectel_domain_name
+  os_username     = module.project-with-user.user_name
+  os_password     = module.project-with-user.user_password
+  os_project_id   = module.project-with-user.project_id
+  os_project_name = module.project-with-user.project_name
+  s3_bucket_name  = "s3-gh-test"
+}
+
+# Создаем CRaaS
+module "craas" {
+  source        = "./modules/craas"
+  os_project_id = module.project-with-user.project_id
+  token_ttl     = "1y"
+}
+
+# Приатачим плавающий ip к виртуалке
+
+# создадим floating ip
+module "fl_ip" {
+  source = "./modules/floatingip"
+  region = "ru-9"
+}
+
+resource "openstack_networking_floatingip_associate_v2" "association_1" {
+  port_id     = module.vm.vm_port_id
+  floating_ip = module.fl_ip.floatingip_address
+  region      = "ru-9"
+}
+
+# Создаем MKS с cpu и gpu нод группами
+module "mks" {
+  source               = "./modules/mks/k8s-cluster-standalone"
+
+  cluster_name         = "gh-cluster-test"
+  kube_version         = "1.28.3" # Здесь важно выбрать доступную версию, может протухнуть
+
+  os_availability_zone = "ru-9a"
+  os_region            = "ru-9"
+  os_project_id        = module.project-with-user.project_id
+
+  nodegroups           = 2
+  ng_nodes_count       = [2, 1]
+  ng_cpus              = [4, 4]
+  ng_ram_mb            = [8192, 8192]
+  ng_volume_gb         = [100, 100]
+  ng_volume_type       = ["fast", "fast"]
+  ng_labels            = [{ "role" : "system" }, { "role" : "cpu" }]
+
+  gpu_nodegroups     = 1
+  gpu_ng_nodes_count = [1]
+  gpu_ng_volume_gb   = [100]
+  gpu_ng_volume_type = ["fast"]
+  gpu_ng_labels      = [{ "role" : "gpu" }]
+  gpu_ng_flavor      = ["3031"]
+
+  nat_subnet_cidr    = "10.222.0.0/16"
+  enable_autorepair  = false
+  network_id         = ""
+}
Index: modules/nat/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_openstack\"></a> [openstack](#provider\\_openstack) | >= 1.46.0 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| openstack_networking_network_v2.network_1 | resource |\n| openstack_networking_router_interface_v2.router_interface_1 | resource |\n| openstack_networking_router_v2.router_1 | resource |\n| openstack_networking_subnet_v2.subnet_1 | resource |\n| openstack_networking_network_v2.external_net | data source |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_dns_nameservers\"></a> [dns\\_nameservers](#input\\_dns\\_nameservers) | DNS servers to be used | `list(string)` | <pre>[<br>  \"188.93.16.19\",<br>  \"188.93.17.19\"<br>]</pre> | no |\n| <a name=\"input_enable_dhcp\"></a> [enable\\_dhcp](#input\\_enable\\_dhcp) | DHCP enable flag | `bool` | `false` | no |\n| <a name=\"input_network_name\"></a> [network\\_name](#input\\_network\\_name) | Network name to be created | `string` | `\"network_1\"` | no |\n| <a name=\"input_router_external_net_name\"></a> [router\\_external\\_net\\_name](#input\\_router\\_external\\_net\\_name) | Name of external network to be used | `string` | `\"external-network\"` | no |\n| <a name=\"input_router_name\"></a> [router\\_name](#input\\_router\\_name) | Router name to be created | `string` | `\"router_1\"` | no |\n| <a name=\"input_subnet_cidr\"></a> [subnet\\_cidr](#input\\_subnet\\_cidr) | Subnet CIRD to be created | `string` | `\"192.168.0.0/24\"` | no |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_external_network_id\"></a> [external\\_network\\_id](#output\\_external\\_network\\_id) | ID внешней подсети |\n| <a name=\"output_network_id\"></a> [network\\_id](#output\\_network\\_id) | ID созданной сети |\n| <a name=\"output_router_id\"></a> [router\\_id](#output\\_router\\_id) | ID созданного роутера |\n| <a name=\"output_subnet_id\"></a> [subnet\\_id](#output\\_subnet\\_id) | ID созданной подсети |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/nat/README.md b/modules/nat/README.md
--- a/modules/nat/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/nat/README.md	(date 1703674916274)
@@ -3,13 +3,13 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | >= 1.46.0 |
+| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.53.0 |
 
 ## Modules
 
@@ -19,11 +19,11 @@
 
 | Name | Type |
 |------|------|
-| openstack_networking_network_v2.network_1 | resource |
-| openstack_networking_router_interface_v2.router_interface_1 | resource |
-| openstack_networking_router_v2.router_1 | resource |
-| openstack_networking_subnet_v2.subnet_1 | resource |
-| openstack_networking_network_v2.external_net | data source |
+| [openstack_networking_network_v2.network_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/networking_network_v2) | resource |
+| [openstack_networking_router_interface_v2.router_interface_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/networking_router_interface_v2) | resource |
+| [openstack_networking_router_v2.router_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/networking_router_v2) | resource |
+| [openstack_networking_subnet_v2.subnet_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/networking_subnet_v2) | resource |
+| [openstack_networking_network_v2.external_net](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/data-sources/networking_network_v2) | data source |
 
 ## Inputs
 
Index: modules/os_project_with_user/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_random\"></a> [random](#requirement\\_random) | >= 3.3.2 |\n| <a name=\"requirement_selectel\"></a> [selectel](#requirement\\_selectel) | >= 4.0.1 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_random\"></a> [random](#provider\\_random) | >= 3.3.2 |\n| <a name=\"provider_selectel\"></a> [selectel](#provider\\_selectel) | >= 4.0.1 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| random_password.user_1_password | resource |\n| selectel_vpc_project_v2.project_1 | resource |\n| selectel_vpc_role_v2.role_1 | resource |\n| selectel_vpc_user_v2.user_1 | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_os_project_name\"></a> [os\\_project\\_name](#input\\_os\\_project\\_name) | Name of OpenStack project to create | `string` | n/a | yes |\n| <a name=\"input_os_username\"></a> [os\\_username](#input\\_os\\_username) | Username of user create in OpenStack project | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_project_id\"></a> [project\\_id](#output\\_project\\_id) | ID of created project |\n| <a name=\"output_project_name\"></a> [project\\_name](#output\\_project\\_name) | Name of created project |\n| <a name=\"output_role_id\"></a> [role\\_id](#output\\_role\\_id) | ID of created user role |\n| <a name=\"output_user_id\"></a> [user\\_id](#output\\_user\\_id) | ID of user, that admins the project |\n| <a name=\"output_user_name\"></a> [user\\_name](#output\\_user\\_name) | Username of created user |\n| <a name=\"output_user_password\"></a> [user\\_password](#output\\_user\\_password) | Password of created user. Generated automatically. |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/os_project_with_user/README.md b/modules/os_project_with_user/README.md
--- a/modules/os_project_with_user/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/os_project_with_user/README.md	(date 1703674927185)
@@ -21,10 +21,10 @@
 
 | Name | Type |
 |------|------|
-| random_password.user_1_password | resource |
-| selectel_vpc_project_v2.project_1 | resource |
-| selectel_vpc_role_v2.role_1 | resource |
-| selectel_vpc_user_v2.user_1 | resource |
+| [random_password.user_1_password](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password) | resource |
+| [selectel_vpc_project_v2.project_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/vpc_project_v2) | resource |
+| [selectel_vpc_role_v2.role_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/vpc_role_v2) | resource |
+| [selectel_vpc_user_v2.user_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/vpc_user_v2) | resource |
 
 ## Inputs
 
Index: modules/nat/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/nat/versions.tf b/modules/nat/versions.tf
--- a/modules/nat/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/nat/versions.tf	(date 1703609108029)
@@ -2,7 +2,7 @@
   required_providers {
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/mks/k8s-cluster-standalone/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    selectel = {\n      source  = \"selectel/selectel\"\n      version = \">= 4.0.1\"\n    }\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mks/k8s-cluster-standalone/versions.tf b/modules/mks/k8s-cluster-standalone/versions.tf
--- a/modules/mks/k8s-cluster-standalone/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/mks/k8s-cluster-standalone/versions.tf	(date 1703609108039)
@@ -2,11 +2,11 @@
   required_providers {
     selectel = {
       source  = "selectel/selectel"
-      version = ">= 4.0.1"
+      version = ">= 4.0.2"
     }
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/mks/k8s-cluster-standalone/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n| <a name=\"requirement_selectel\"></a> [selectel](#requirement\\_selectel) | >= 4.0.1 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_selectel\"></a> [selectel](#provider\\_selectel) | >= 4.0.1 |\n\n## Modules\n\n| Name | Source | Version |\n|------|--------|---------|\n| <a name=\"module_kubernetes_cluster\"></a> [kubernetes\\_cluster](#module\\_kubernetes\\_cluster) | ../k8s-cluster | n/a |\n| <a name=\"module_kubernetes_nodegroup\"></a> [kubernetes\\_nodegroup](#module\\_kubernetes\\_nodegroup) | ../k8s-nodegroup | n/a |\n| <a name=\"module_kubernetes_nodegroup_gpu\"></a> [kubernetes\\_nodegroup\\_gpu](#module\\_kubernetes\\_nodegroup\\_gpu) | ../k8s-nodegroup-gpu | n/a |\n| <a name=\"module_nat\"></a> [nat](#module\\_nat) | ../../nat | n/a |\n\n## Resources\n\n| Name | Type |\n|------|------|\n| selectel_mks_kubeconfig_v1.kubeconfig | data source |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_cluster_name\"></a> [cluster\\_name](#input\\_cluster\\_name) | n/a | `string` | n/a | yes |\n| <a name=\"input_enable_autorepair\"></a> [enable\\_autorepair](#input\\_enable\\_autorepair) | n/a | `bool` | `false` | no |\n| <a name=\"input_enable_patch_version_auto_upgrade\"></a> [enable\\_patch\\_version\\_auto\\_upgrade](#input\\_enable\\_patch\\_version\\_auto\\_upgrade) | n/a | `bool` | `false` | no |\n| <a name=\"input_gpu_ng_flavor\"></a> [gpu\\_ng\\_flavor](#input\\_gpu\\_ng\\_flavor) | n/a | `list(string)` | <pre>[<br>  \"2\"<br>]</pre> | no |\n| <a name=\"input_gpu_ng_labels\"></a> [gpu\\_ng\\_labels](#input\\_gpu\\_ng\\_labels) | n/a | `list(map(any))` | <pre>[<br>  {<br>    \"role\": \"gpu\"<br>  }<br>]</pre> | no |\n| <a name=\"input_gpu_ng_nodes_count\"></a> [gpu\\_ng\\_nodes\\_count](#input\\_gpu\\_ng\\_nodes\\_count) | n/a | `list(number)` | <pre>[<br>  2<br>]</pre> | no |\n| <a name=\"input_gpu_ng_taints\"></a> [gpu\\_ng\\_taints](#input\\_gpu\\_ng\\_taints) | n/a | <pre>list(object({<br>    key    = string<br>    value  = string<br>    effect = string<br>  }))</pre> | `[]` | no |\n| <a name=\"input_gpu_ng_volume_gb\"></a> [gpu\\_ng\\_volume\\_gb](#input\\_gpu\\_ng\\_volume\\_gb) | n/a | `list(number)` | <pre>[<br>  32<br>]</pre> | no |\n| <a name=\"input_gpu_ng_volume_type\"></a> [gpu\\_ng\\_volume\\_type](#input\\_gpu\\_ng\\_volume\\_type) | n/a | `list(string)` | <pre>[<br>  \"fast\"<br>]</pre> | no |\n| <a name=\"input_gpu_nodegroups\"></a> [gpu\\_nodegroups](#input\\_gpu\\_nodegroups) | n/a | `number` | `0` | no |\n| <a name=\"input_kube_version\"></a> [kube\\_version](#input\\_kube\\_version) | n/a | `string` | n/a | yes |\n| <a name=\"input_maintenance_window_end\"></a> [maintenance\\_window\\_end](#input\\_maintenance\\_window\\_end) | n/a | `string` | `\"04:00:00\"` | no |\n| <a name=\"input_maintenance_window_start\"></a> [maintenance\\_window\\_start](#input\\_maintenance\\_window\\_start) | n/a | `string` | `\"03:00:00\"` | no |\n| <a name=\"input_nat_subnet_cidr\"></a> [nat\\_subnet\\_cidr](#input\\_nat\\_subnet\\_cidr) | n/a | `string` | `\"10.222.0.0/16\"` | no |\n| <a name=\"input_network_id\"></a> [network\\_id](#input\\_network\\_id) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_ng_affinity_policy\"></a> [ng\\_affinity\\_policy](#input\\_ng\\_affinity\\_policy) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_ng_cpus\"></a> [ng\\_cpus](#input\\_ng\\_cpus) | n/a | `list(number)` | <pre>[<br>  2<br>]</pre> | no |\n| <a name=\"input_ng_keypair_name\"></a> [ng\\_keypair\\_name](#input\\_ng\\_keypair\\_name) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_ng_labels\"></a> [ng\\_labels](#input\\_ng\\_labels) | n/a | `list(map(any))` | <pre>[<br>  {<br>    \"role\": \"system\"<br>  }<br>]</pre> | no |\n| <a name=\"input_ng_nodes_count\"></a> [ng\\_nodes\\_count](#input\\_ng\\_nodes\\_count) | n/a | `list(number)` | <pre>[<br>  2<br>]</pre> | no |\n| <a name=\"input_ng_ram_mb\"></a> [ng\\_ram\\_mb](#input\\_ng\\_ram\\_mb) | n/a | `list(number)` | <pre>[<br>  4096<br>]</pre> | no |\n| <a name=\"input_ng_taints\"></a> [ng\\_taints](#input\\_ng\\_taints) | n/a | <pre>list(object({<br>    key    = string<br>    value  = string<br>    effect = string<br>  }))</pre> | `[]` | no |\n| <a name=\"input_ng_volume_gb\"></a> [ng\\_volume\\_gb](#input\\_ng\\_volume\\_gb) | n/a | `list(number)` | <pre>[<br>  32<br>]</pre> | no |\n| <a name=\"input_ng_volume_type\"></a> [ng\\_volume\\_type](#input\\_ng\\_volume\\_type) | n/a | `list(string)` | <pre>[<br>  \"fast\"<br>]</pre> | no |\n| <a name=\"input_nodegroups\"></a> [nodegroups](#input\\_nodegroups) | n/a | `string` | `1` | no |\n| <a name=\"input_os_auth_url\"></a> [os\\_auth\\_url](#input\\_os\\_auth\\_url) | n/a | `string` | `\"https://api.selvpc.ru/identity/v3/auth/\"` | no |\n| <a name=\"input_os_availability_zone\"></a> [os\\_availability\\_zone](#input\\_os\\_availability\\_zone) | n/a | `string` | n/a | yes |\n| <a name=\"input_os_project_id\"></a> [os\\_project\\_id](#input\\_os\\_project\\_id) | ID проекта | `string` | n/a | yes |\n| <a name=\"input_os_region\"></a> [os\\_region](#input\\_os\\_region) | Region of openstack | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_kube_config\"></a> [kube\\_config](#output\\_kube\\_config) | n/a |\n| <a name=\"output_nat_network_id\"></a> [nat\\_network\\_id](#output\\_nat\\_network\\_id) | n/a |\n| <a name=\"output_nat_subnet_id\"></a> [nat\\_subnet\\_id](#output\\_nat\\_subnet\\_id) | n/a |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mks/k8s-cluster-standalone/README.md b/modules/mks/k8s-cluster-standalone/README.md
--- a/modules/mks/k8s-cluster-standalone/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/mks/k8s-cluster-standalone/README.md	(date 1703674888376)
@@ -3,14 +3,14 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
-| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.1 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
+| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.2 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.1 |
+| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.2 |
 
 ## Modules
 
@@ -25,7 +25,7 @@
 
 | Name | Type |
 |------|------|
-| selectel_mks_kubeconfig_v1.kubeconfig | data source |
+| [selectel_mks_kubeconfig_v1.kubeconfig](https://registry.terraform.io/providers/selectel/selectel/latest/docs/data-sources/mks_kubeconfig_v1) | data source |
 
 ## Inputs
 
Index: modules/mks/k8s-nodegroup-gpu/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_selectel\"></a> [selectel](#requirement\\_selectel) | >= 4.0.1 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_selectel\"></a> [selectel](#provider\\_selectel) | >= 4.0.1 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| selectel_mks_nodegroup_v1.nodegroup_1 | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_affinity_policy\"></a> [affinity\\_policy](#input\\_affinity\\_policy) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_availability_zone\"></a> [availability\\_zone](#input\\_availability\\_zone) | n/a | `any` | n/a | yes |\n| <a name=\"input_cluster_id\"></a> [cluster\\_id](#input\\_cluster\\_id) | ID кластера | `string` | n/a | yes |\n| <a name=\"input_cpus\"></a> [cpus](#input\\_cpus) | n/a | `number` | `1` | no |\n| <a name=\"input_flavor_id\"></a> [flavor\\_id](#input\\_flavor\\_id) | n/a | `any` | n/a | yes |\n| <a name=\"input_keypair_name\"></a> [keypair\\_name](#input\\_keypair\\_name) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_labels\"></a> [labels](#input\\_labels) | n/a | `any` | n/a | yes |\n| <a name=\"input_nodes_count\"></a> [nodes\\_count](#input\\_nodes\\_count) | n/a | `number` | `1` | no |\n| <a name=\"input_os_project_id\"></a> [os\\_project\\_id](#input\\_os\\_project\\_id) | ID проекта | `string` | n/a | yes |\n| <a name=\"input_os_region\"></a> [os\\_region](#input\\_os\\_region) | Регион my.selectel | `any` | n/a | yes |\n| <a name=\"input_ram_mb\"></a> [ram\\_mb](#input\\_ram\\_mb) | n/a | `number` | `1024` | no |\n| <a name=\"input_taints\"></a> [taints](#input\\_taints) | n/a | `any` | n/a | yes |\n| <a name=\"input_volume_gb\"></a> [volume\\_gb](#input\\_volume\\_gb) | n/a | `number` | `10` | no |\n| <a name=\"input_volume_type\"></a> [volume\\_type](#input\\_volume\\_type) | n/a | `any` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_nodegroup_id\"></a> [nodegroup\\_id](#output\\_nodegroup\\_id) | ID созданной группы нод |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mks/k8s-nodegroup-gpu/README.md b/modules/mks/k8s-nodegroup-gpu/README.md
--- a/modules/mks/k8s-nodegroup-gpu/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/mks/k8s-nodegroup-gpu/README.md	(date 1703674909534)
@@ -3,13 +3,13 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.1 |
+| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.2 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.1 |
+| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.2 |
 
 ## Modules
 
@@ -19,7 +19,7 @@
 
 | Name | Type |
 |------|------|
-| selectel_mks_nodegroup_v1.nodegroup_1 | resource |
+| [selectel_mks_nodegroup_v1.nodegroup_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/mks_nodegroup_v1) | resource |
 
 ## Inputs
 
Index: modules/mks/k8s-nodegroup-gpu/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    selectel = {\n      source  = \"selectel/selectel\"\n      version = \">= 4.0.1\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mks/k8s-nodegroup-gpu/versions.tf b/modules/mks/k8s-nodegroup-gpu/versions.tf
--- a/modules/mks/k8s-nodegroup-gpu/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/mks/k8s-nodegroup-gpu/versions.tf	(date 1703608624717)
@@ -2,7 +2,7 @@
   required_providers {
     selectel = {
       source  = "selectel/selectel"
-      version = ">= 4.0.1"
+      version = ">= 4.0.2"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/image_datasource/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_openstack\"></a> [openstack](#provider\\_openstack) | >= 1.46.0 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| [openstack_images_image_v2.image_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs/data-sources/images_image_v2) | data source |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_image_name\"></a> [image\\_name](#input\\_image\\_name) | Имя образа | `string` | `\"Ubuntu 20.04 LTS 64-bit\"` | no |\n| <a name=\"input_most_recent\"></a> [most\\_recent](#input\\_most\\_recent) | Если возвращается более одного результата, используйте самое последнее изображение. | `bool` | `true` | no |\n| <a name=\"input_os_region\"></a> [os\\_region](#input\\_os\\_region) | Region of openstack | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_image_id\"></a> [image\\_id](#output\\_image\\_id) | ID созданного image |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/image_datasource/README.md b/modules/image_datasource/README.md
--- a/modules/image_datasource/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/image_datasource/README.md	(date 1703674857450)
@@ -3,13 +3,13 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | >= 1.46.0 |
+| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.53.0 |
 
 ## Modules
 
@@ -19,7 +19,7 @@
 
 | Name | Type |
 |------|------|
-| [openstack_images_image_v2.image_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs/data-sources/images_image_v2) | data source |
+| [openstack_images_image_v2.image_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/data-sources/images_image_v2) | data source |
 
 ## Inputs
 
Index: modules/mks/k8s-nodegroup/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    selectel = {\n      source  = \"selectel/selectel\"\n      version = \">= 4.0.1\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mks/k8s-nodegroup/versions.tf b/modules/mks/k8s-nodegroup/versions.tf
--- a/modules/mks/k8s-nodegroup/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/mks/k8s-nodegroup/versions.tf	(date 1703608624711)
@@ -2,7 +2,7 @@
   required_providers {
     selectel = {
       source  = "selectel/selectel"
-      version = ">= 4.0.1"
+      version = ">= 4.0.2"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/image_datasource/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/image_datasource/versions.tf b/modules/image_datasource/versions.tf
--- a/modules/image_datasource/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/image_datasource/versions.tf	(date 1703609108032)
@@ -2,7 +2,7 @@
   required_providers {
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/mks/k8s-nodegroup/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_selectel\"></a> [selectel](#requirement\\_selectel) | >= 4.0.1 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_selectel\"></a> [selectel](#provider\\_selectel) | >= 4.0.1 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| selectel_mks_nodegroup_v1.nodegroup_1 | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_affinity_policy\"></a> [affinity\\_policy](#input\\_affinity\\_policy) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_availability_zone\"></a> [availability\\_zone](#input\\_availability\\_zone) | n/a | `any` | n/a | yes |\n| <a name=\"input_cluster_id\"></a> [cluster\\_id](#input\\_cluster\\_id) | ID кластера | `string` | n/a | yes |\n| <a name=\"input_cpus\"></a> [cpus](#input\\_cpus) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_flavor_id\"></a> [flavor\\_id](#input\\_flavor\\_id) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_keypair_name\"></a> [keypair\\_name](#input\\_keypair\\_name) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_labels\"></a> [labels](#input\\_labels) | n/a | `any` | n/a | yes |\n| <a name=\"input_nodes_count\"></a> [nodes\\_count](#input\\_nodes\\_count) | n/a | `number` | `1` | no |\n| <a name=\"input_os_project_id\"></a> [os\\_project\\_id](#input\\_os\\_project\\_id) | ID проекта | `string` | n/a | yes |\n| <a name=\"input_os_region\"></a> [os\\_region](#input\\_os\\_region) | Region of openstack | `string` | n/a | yes |\n| <a name=\"input_ram_mb\"></a> [ram\\_mb](#input\\_ram\\_mb) | n/a | `string` | `\"\"` | no |\n| <a name=\"input_taints\"></a> [taints](#input\\_taints) | n/a | `any` | n/a | yes |\n| <a name=\"input_volume_gb\"></a> [volume\\_gb](#input\\_volume\\_gb) | n/a | `number` | `10` | no |\n| <a name=\"input_volume_type\"></a> [volume\\_type](#input\\_volume\\_type) | n/a | `any` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_nodegroup_id\"></a> [nodegroup\\_id](#output\\_nodegroup\\_id) | n/a |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mks/k8s-nodegroup/README.md b/modules/mks/k8s-nodegroup/README.md
--- a/modules/mks/k8s-nodegroup/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/mks/k8s-nodegroup/README.md	(date 1703674902431)
@@ -3,13 +3,13 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.1 |
+| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.2 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.1 |
+| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.2 |
 
 ## Modules
 
@@ -19,7 +19,7 @@
 
 | Name | Type |
 |------|------|
-| selectel_mks_nodegroup_v1.nodegroup_1 | resource |
+| [selectel_mks_nodegroup_v1.nodegroup_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/mks_nodegroup_v1) | resource |
 
 ## Inputs
 
Index: modules/selectel-token/vars.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>variable \"os_username\" {\n  type        = string\n  description = \"Логин пользователя\"\n}\n\nvariable \"os_password\" {\n  type        = string\n  description = \"Пароль пользователя\"\n}\n\nvariable \"os_project_name\" {\n  description = \"Название проекта, к которому будет создан ключ\"\n  type        = string\n  default     = \"\"\n}\n\nvariable \"os_account\" {\n  type        = string\n  description = \"Account ID\"\n  default     = \"122972\"\n}\n\n\nvariable \"fetch_account_token\" {\n  default     = true\n  type        = bool\n  description = \"Если пользователь не может получить токен аккаунта, выставить в 0\"\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/selectel-token/vars.tf b/modules/selectel-token/vars.tf
--- a/modules/selectel-token/vars.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/selectel-token/vars.tf	(date 1703667097589)
@@ -9,17 +9,15 @@
 }
 
 variable "os_project_name" {
-  description = "Название проекта, к которому будет создан ключ"
   type        = string
+  description = "Название проекта, к которому будет создан ключ"
   default     = ""
 }
 
 variable "os_account" {
   type        = string
   description = "Account ID"
-  default     = "122972"
 }
-
 
 variable "fetch_account_token" {
   default     = true
Index: modules/mks/k8s-cluster/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_selectel\"></a> [selectel](#requirement\\_selectel) | >= 4.0.1 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_selectel\"></a> [selectel](#provider\\_selectel) | >= 4.0.1 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| selectel_mks_cluster_v1.cluster_1 | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_cluster_name\"></a> [cluster\\_name](#input\\_cluster\\_name) | Имя кластера | `string` | n/a | yes |\n| <a name=\"input_enable_autorepair\"></a> [enable\\_autorepair](#input\\_enable\\_autorepair) | Включает или отключает автоматическое восстановление узлов (worker nodes автоматически перезапускаются). Автоматическое восстановление недоступно, если у вас есть один worker node. После автовосстановления все данные на загрузочных томах удаляются. | `bool` | `true` | no |\n| <a name=\"input_enable_patch_version_auto_upgrade\"></a> [enable\\_patch\\_version\\_auto\\_upgrade](#input\\_enable\\_patch\\_version\\_auto\\_upgrade) | Включает или отключает автоматическое обновление кластера до последней доступной версии исправления Kubernetes во время периода обслуживания. | `bool` | `true` | no |\n| <a name=\"input_kube_version\"></a> [kube\\_version](#input\\_kube\\_version) | Версия кластера kubernetes | `string` | n/a | yes |\n| <a name=\"input_maintenance_window_start\"></a> [maintenance\\_window\\_start](#input\\_maintenance\\_window\\_start) | Время в формате UTC, когда начинается обслуживание кластера. Формат: hh:mm:ss. | `string` | `\"\"` | no |\n| <a name=\"input_os_network_id\"></a> [os\\_network\\_id](#input\\_os\\_network\\_id) | ID сети openstack | `string` | n/a | yes |\n| <a name=\"input_os_project_id\"></a> [os\\_project\\_id](#input\\_os\\_project\\_id) | ID проекта | `string` | n/a | yes |\n| <a name=\"input_os_region\"></a> [os\\_region](#input\\_os\\_region) | Region of openstack | `string` | n/a | yes |\n| <a name=\"input_os_subnet_id\"></a> [os\\_subnet\\_id](#input\\_os\\_subnet\\_id) | ID подсети openstack | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_cluster_id\"></a> [cluster\\_id](#output\\_cluster\\_id) | ID созданного кластера |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mks/k8s-cluster/README.md b/modules/mks/k8s-cluster/README.md
--- a/modules/mks/k8s-cluster/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/mks/k8s-cluster/README.md	(date 1703674878034)
@@ -3,13 +3,13 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.1 |
+| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.2 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.1 |
+| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.2 |
 
 ## Modules
 
@@ -19,7 +19,7 @@
 
 | Name | Type |
 |------|------|
-| selectel_mks_cluster_v1.cluster_1 | resource |
+| [selectel_mks_cluster_v1.cluster_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/mks_cluster_v1) | resource |
 
 ## Inputs
 
Index: modules/selectel-token/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.0.0 |\n| <a name=\"requirement_http-full\"></a> [http-full](#requirement\\_http-full) | >= 1.3.1 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_http-full\"></a> [http-full](#provider\\_http-full) | >= 1.3.1 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| http-full_http.accout-token | data source |\n| http-full_http.project-token | data source |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_fetch_account_token\"></a> [fetch\\_account\\_token](#input\\_fetch\\_account\\_token) | Если пользователь не может получить токен аккаунта, выставить в 0 | `bool` | `true` | no |\n| <a name=\"input_os_account\"></a> [os\\_account](#input\\_os\\_account) | Account ID | `string` | `\"122972\"` | no |\n| <a name=\"input_os_password\"></a> [os\\_password](#input\\_os\\_password) | Пароль пользователя | `string` | n/a | yes |\n| <a name=\"input_os_project_name\"></a> [os\\_project\\_name](#input\\_os\\_project\\_name) | Название проекта, к которому будет создан ключ | `string` | `\"\"` | no |\n| <a name=\"input_os_username\"></a> [os\\_username](#input\\_os\\_username) | Логин пользователя | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_account_token\"></a> [account\\_token](#output\\_account\\_token) | n/a |\n| <a name=\"output_project_token\"></a> [project\\_token](#output\\_project\\_token) | n/a |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/selectel-token/README.md b/modules/selectel-token/README.md
--- a/modules/selectel-token/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/selectel-token/README.md	(date 1703674938850)
@@ -19,15 +19,15 @@
 
 | Name | Type |
 |------|------|
-| http-full_http.accout-token | data source |
-| http-full_http.project-token | data source |
+| [http-full_http.accout-token](https://registry.terraform.io/providers/salrashid123/http-full/latest/docs/data-sources/http) | data source |
+| [http-full_http.project-token](https://registry.terraform.io/providers/salrashid123/http-full/latest/docs/data-sources/http) | data source |
 
 ## Inputs
 
 | Name | Description | Type | Default | Required |
 |------|-------------|------|---------|:--------:|
 | <a name="input_fetch_account_token"></a> [fetch\_account\_token](#input\_fetch\_account\_token) | Если пользователь не может получить токен аккаунта, выставить в 0 | `bool` | `true` | no |
-| <a name="input_os_account"></a> [os\_account](#input\_os\_account) | Account ID | `string` | `"122972"` | no |
+| <a name="input_os_account"></a> [os\_account](#input\_os\_account) | Account ID | `string` | n/a | yes |
 | <a name="input_os_password"></a> [os\_password](#input\_os\_password) | Пароль пользователя | `string` | n/a | yes |
 | <a name="input_os_project_name"></a> [os\_project\_name](#input\_os\_project\_name) | Название проекта, к которому будет создан ключ | `string` | `""` | no |
 | <a name="input_os_username"></a> [os\_username](#input\_os\_username) | Логин пользователя | `string` | n/a | yes |
Index: modules/vm/outputs.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/vm/outputs.tf b/modules/vm/outputs.tf
new file mode 100644
--- /dev/null	(date 1703668107441)
+++ b/modules/vm/outputs.tf	(date 1703668107441)
@@ -0,0 +1,11 @@
+output "nat_net_id" {
+  value = module.nat.network_id
+}
+
+output "nat_sub_id" {
+  value = module.nat.subnet_id
+}
+
+output "vm_port_id" {
+  value = openstack_networking_port_v2.port_1.id
+}
Index: modules/mks/k8s-cluster/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    selectel = {\n      source  = \"selectel/selectel\"\n      version = \">= 4.0.1\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/mks/k8s-cluster/versions.tf b/modules/mks/k8s-cluster/versions.tf
--- a/modules/mks/k8s-cluster/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/mks/k8s-cluster/versions.tf	(date 1703608624714)
@@ -2,7 +2,7 @@
   required_providers {
     selectel = {
       source  = "selectel/selectel"
-      version = ">= 4.0.1"
+      version = ">= 4.0.2"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/floatingip/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_openstack\"></a> [openstack](#provider\\_openstack) | >= 1.46.0 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| [openstack_networking_floatingip_v2.floatingip_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs/resources/networking_floatingip_v2) | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_pool\"></a> [pool](#input\\_pool) | Имя пула, из которого можно получить плавающий IP-адрес. Изменение этого параметра создает новый плавающий IP-адрес. | `string` | `\"external-network\"` | no |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_floatingip_address\"></a> [floatingip\\_address](#output\\_floatingip\\_address) | floating ip |\n| <a name=\"output_floatingip_id\"></a> [floatingip\\_id](#output\\_floatingip\\_id) | floating ip id |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/floatingip/README.md b/modules/floatingip/README.md
--- a/modules/floatingip/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/floatingip/README.md	(date 1703674850513)
@@ -3,13 +3,13 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | >= 1.46.0 |
+| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.53.0 |
 
 ## Modules
 
@@ -19,13 +19,14 @@
 
 | Name | Type |
 |------|------|
-| [openstack_networking_floatingip_v2.floatingip_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs/resources/networking_floatingip_v2) | resource |
+| [openstack_networking_floatingip_v2.floatingip_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/networking_floatingip_v2) | resource |
 
 ## Inputs
 
 | Name | Description | Type | Default | Required |
 |------|-------------|------|---------|:--------:|
 | <a name="input_pool"></a> [pool](#input\_pool) | Имя пула, из которого можно получить плавающий IP-адрес. Изменение этого параметра создает новый плавающий IP-адрес. | `string` | `"external-network"` | no |
+| <a name="input_region"></a> [region](#input\_region) | n/a | `string` | n/a | yes |
 
 ## Outputs
 
Index: modules/floatingip/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/floatingip/versions.tf b/modules/floatingip/versions.tf
--- a/modules/floatingip/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/floatingip/versions.tf	(date 1703609108037)
@@ -2,7 +2,7 @@
   required_providers {
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/vm/vars.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>variable \"vm_name\" {\n  type        = string\n  description = \"Name of VM to create\"\n}\n\nvariable \"os_region\" {\n  type        = string\n  description = \"Region where network will be created\"\n}\n\nvariable \"os_zone\" {\n  type        = string\n  description = \"OS zone to be used\"\n}\n\nvariable \"os_project_name\" {\n  type        = string\n  description = \"Name of OpenStack project\"\n}\n\nvariable \"server_root_disk_gb\" {\n  type        = list(number)\n  default     = [40]\n  description = \"List of disks\"\n}\n\n\nvariable \"server_volume_type\" {\n  type        = list(string)\n  default     = [\"fast\"]\n  description = \"List of disk types\"\n}\n\nvariable \"image_name\" {\n  type    = list(string)\n  default = [\"Ubuntu 20.04 LTS 64-bit\"]\n\n}\n\nvariable \"vm_local_disk_gb\" {\n  type        = string\n  description = \"Flavor's local disk size\"\n  default     = \"0\"\n}\n\nvariable \"vm_vcpus\" {\n  type        = number\n  description = \"CPU in VMs flavor\"\n  default     = 2\n}\n\nvariable \"vm_ram_mb\" {\n  type        = number\n  description = \"RAM in VMs flavor\"\n  default     = 4096\n}\n\n\nvariable \"router_external_net_name\" {\n  type        = string\n  default     = \"external-network\"\n  description = \"Name of external network to be used\"\n}\n\nvariable \"dns_nameservers\" {\n  description = \"DNS servers to be used\"\n  type        = list(string)\n  default = [\n    \"188.93.16.19\",\n    \"188.93.17.19\",\n  ]\n}\n\nvariable \"subnet_cidr\" {\n  description = \"Subnet CIRD to be created\"\n  type        = string\n  default     = \"192.168.0.0/24\"\n}\n\nvariable \"router_name\" {\n  description = \"Router name to be created\"\n  type        = string\n  default     = \"router_1\"\n}\n\nvariable \"network_name\" {\n  description = \"Network name to be created\"\n  type        = string\n  default     = \"network_1\"\n}\n\nvariable \"enable_dhcp\" {\n  description = \"DHCP enable flag\"\n  type        = bool\n  default     = false\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/vm/vars.tf b/modules/vm/vars.tf
--- a/modules/vm/vars.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/vm/vars.tf	(date 1703610852924)
@@ -13,18 +13,12 @@
   description = "OS zone to be used"
 }
 
-variable "os_project_name" {
-  type        = string
-  description = "Name of OpenStack project"
-}
-
 variable "server_root_disk_gb" {
   type        = list(number)
   default     = [40]
   description = "List of disks"
 }
 
-
 variable "server_volume_type" {
   type        = list(string)
   default     = ["fast"]
@@ -55,7 +49,6 @@
   default     = 4096
 }
 
-
 variable "router_external_net_name" {
   type        = string
   default     = "external-network"
@@ -63,7 +56,7 @@
 }
 
 variable "dns_nameservers" {
-  description = "DNS servers to be used"
+  description = "DNS servers to be used, selectel dns is default"
   type        = list(string)
   default = [
     "188.93.16.19",
Index: modules/vm/main.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>module \"os-flavor\" {\n  source = \"../flavor\"\n\n  flavor_name          = var.vm_name\n  flavor_vcpus         = var.vm_vcpus\n  flavor_ram_mb        = var.vm_ram_mb\n  flavor_local_disk_gb = var.vm_local_disk_gb\n  os_region            = var.os_region\n}\n\nmodule \"volume\" {\n  source = \"../volume\"\n\n  count               = length(var.server_root_disk_gb)\n  server_root_disk_gb = var.server_root_disk_gb[count.index]\n  server_volume_type  = var.server_volume_type[count.index]\n  os_zone             = var.os_zone\n  image_name          = var.image_name[count.index]\n}\n\n\nmodule \"nat\" {\n  source = \"../nat\"\n\n  router_external_net_name = var.router_external_net_name\n  dns_nameservers          = var.dns_nameservers\n  subnet_cidr              = var.subnet_cidr\n  router_name              = var.router_name\n  network_name             = var.network_name\n  enable_dhcp              = var.enable_dhcp\n\n}\n\n\nresource \"openstack_networking_port_v2\" \"port_1\" {\n  name       = \"${var.vm_name}-eth0\"\n  network_id = module.nat.network_id\n\n  fixed_ip {\n    subnet_id = module.nat.subnet_id\n  }\n}\n\n\nresource \"openstack_compute_instance_v2\" \"instance_1\" {\n  name = var.vm_name\n\n  flavor_id         = module.os-flavor.flavor_id\n  availability_zone = var.os_zone\n\n  network {\n    port = openstack_networking_port_v2.port_1.id\n  }\n\n  dynamic \"block_device\" {\n    for_each = module.volume\n    content {\n      source_type      = \"volume\"\n      destination_type = \"volume\"\n      uuid             = block_device.value.volume_id\n      boot_index       = block_device.key\n    }\n  }\n\n  vendor_options {\n    ignore_resize_confirmation = true\n  }\n\n  lifecycle {\n    ignore_changes = [\n      key_pair,\n    ]\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/vm/main.tf b/modules/vm/main.tf
--- a/modules/vm/main.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/vm/main.tf	(date 1703610852928)
@@ -18,7 +18,6 @@
   image_name          = var.image_name[count.index]
 }
 
-
 module "nat" {
   source = "../nat"
 
@@ -28,9 +27,7 @@
   router_name              = var.router_name
   network_name             = var.network_name
   enable_dhcp              = var.enable_dhcp
-
 }
-
 
 resource "openstack_networking_port_v2" "port_1" {
   name       = "${var.vm_name}-eth0"
@@ -41,7 +38,6 @@
   }
 }
 
-
 resource "openstack_compute_instance_v2" "instance_1" {
   name = var.vm_name
 
Index: modules/keypair/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/keypair/versions.tf b/modules/keypair/versions.tf
--- a/modules/keypair/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/keypair/versions.tf	(date 1703609108019)
@@ -2,7 +2,7 @@
   required_providers {
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/vm/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    selectel = {\n      source  = \"selectel/selectel\"\n      version = \">= 4.0.1\"\n    }\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/vm/versions.tf b/modules/vm/versions.tf
--- a/modules/vm/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/vm/versions.tf	(date 1703609108016)
@@ -2,11 +2,11 @@
   required_providers {
     selectel = {
       source  = "selectel/selectel"
-      version = ">= 4.0.1"
+      version = ">= 4.0.2"
     }
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/floatingip/vars.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>variable \"pool\" {\n  type        = string\n  description = \"Имя пула, из которого можно получить плавающий IP-адрес. Изменение этого параметра создает новый плавающий IP-адрес.\"\n  default     = \"external-network\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/floatingip/vars.tf b/modules/floatingip/vars.tf
--- a/modules/floatingip/vars.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/floatingip/vars.tf	(date 1703668107450)
@@ -3,3 +3,7 @@
   description = "Имя пула, из которого можно получить плавающий IP-адрес. Изменение этого параметра создает новый плавающий IP-адрес."
   default     = "external-network"
 }
+
+variable "region" {
+  type = string
+}
Index: modules/vm/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!-- BEGIN_TF_DOCS -->\n## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n| <a name=\"requirement_selectel\"></a> [selectel](#requirement\\_selectel) | >= 4.0.1 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_openstack\"></a> [openstack](#provider\\_openstack) | >= 1.46.0 |\n\n## Modules\n\n| Name | Source | Version |\n|------|--------|---------|\n| <a name=\"module_nat\"></a> [nat](#module\\_nat) | git.selectel.org/rpd/nat/local | 1.0.0 |\n| <a name=\"module_os-flavor\"></a> [os-flavor](#module\\_os-flavor) | git.selectel.org/rpd/os-flavor/local | 1.0.0 |\n| <a name=\"module_volume\"></a> [volume](#module\\_volume) | git.selectel.org/rpd/volume/local | 1.0.0 |\n\n## Resources\n\n| Name | Type |\n|------|------|\n| openstack_compute_instance_v2.instance_1 | resource |\n| openstack_networking_port_v2.port_1 | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_dns_nameservers\"></a> [dns\\_nameservers](#input\\_dns\\_nameservers) | DNS servers to be used | `list(string)` | <pre>[<br>  \"188.93.16.19\",<br>  \"188.93.17.19\"<br>]</pre> | no |\n| <a name=\"input_enable_dhcp\"></a> [enable\\_dhcp](#input\\_enable\\_dhcp) | DHCP enable flag | `bool` | `false` | no |\n| <a name=\"input_image_name\"></a> [image\\_name](#input\\_image\\_name) | n/a | `list(string)` | <pre>[<br>  \"Ubuntu 20.04 LTS 64-bit\"<br>]</pre> | no |\n| <a name=\"input_network_name\"></a> [network\\_name](#input\\_network\\_name) | Network name to be created | `string` | `\"network_1\"` | no |\n| <a name=\"input_os_project_name\"></a> [os\\_project\\_name](#input\\_os\\_project\\_name) | Name of OpenStack project | `string` | n/a | yes |\n| <a name=\"input_os_region\"></a> [os\\_region](#input\\_os\\_region) | Region where network will be created | `string` | n/a | yes |\n| <a name=\"input_os_zone\"></a> [os\\_zone](#input\\_os\\_zone) | OS zone to be used | `string` | n/a | yes |\n| <a name=\"input_router_external_net_name\"></a> [router\\_external\\_net\\_name](#input\\_router\\_external\\_net\\_name) | Name of external network to be used | `string` | `\"external-network\"` | no |\n| <a name=\"input_router_name\"></a> [router\\_name](#input\\_router\\_name) | Router name to be created | `string` | `\"router_1\"` | no |\n| <a name=\"input_server_root_disk_gb\"></a> [server\\_root\\_disk\\_gb](#input\\_server\\_root\\_disk\\_gb) | List of disks | `list(number)` | <pre>[<br>  40<br>]</pre> | no |\n| <a name=\"input_server_volume_type\"></a> [server\\_volume\\_type](#input\\_server\\_volume\\_type) | List of disk types | `list(string)` | <pre>[<br>  \"fast\"<br>]</pre> | no |\n| <a name=\"input_subnet_cidr\"></a> [subnet\\_cidr](#input\\_subnet\\_cidr) | Subnet CIRD to be created | `string` | `\"192.168.0.0/24\"` | no |\n| <a name=\"input_vm_local_disk_gb\"></a> [vm\\_local\\_disk\\_gb](#input\\_vm\\_local\\_disk\\_gb) | Flavor's local disk size | `string` | `\"0\"` | no |\n| <a name=\"input_vm_name\"></a> [vm\\_name](#input\\_vm\\_name) | Name of VM to create | `string` | n/a | yes |\n| <a name=\"input_vm_ram_mb\"></a> [vm\\_ram\\_mb](#input\\_vm\\_ram\\_mb) | RAM in VMs flavor | `number` | `4096` | no |\n| <a name=\"input_vm_vcpus\"></a> [vm\\_vcpus](#input\\_vm\\_vcpus) | CPU in VMs flavor | `number` | `2` | no |\n\n## Outputs\n\nNo outputs.\n<!-- END_TF_DOCS -->
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/vm/README.md b/modules/vm/README.md
--- a/modules/vm/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/vm/README.md	(date 1703674950885)
@@ -1,42 +1,40 @@
-<!-- BEGIN_TF_DOCS -->
 ## Requirements
 
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
-| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.1 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
+| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.2 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | >= 1.46.0 |
+| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.53.0 |
 
 ## Modules
 
 | Name | Source | Version |
 |------|--------|---------|
-| <a name="module_nat"></a> [nat](#module\_nat) | git.selectel.org/rpd/nat/local | 1.0.0 |
-| <a name="module_os-flavor"></a> [os-flavor](#module\_os-flavor) | git.selectel.org/rpd/os-flavor/local | 1.0.0 |
-| <a name="module_volume"></a> [volume](#module\_volume) | git.selectel.org/rpd/volume/local | 1.0.0 |
+| <a name="module_nat"></a> [nat](#module\_nat) | ../nat | n/a |
+| <a name="module_os-flavor"></a> [os-flavor](#module\_os-flavor) | ../flavor | n/a |
+| <a name="module_volume"></a> [volume](#module\_volume) | ../volume | n/a |
 
 ## Resources
 
 | Name | Type |
 |------|------|
-| openstack_compute_instance_v2.instance_1 | resource |
-| openstack_networking_port_v2.port_1 | resource |
+| [openstack_compute_instance_v2.instance_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/compute_instance_v2) | resource |
+| [openstack_networking_port_v2.port_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/networking_port_v2) | resource |
 
 ## Inputs
 
 | Name | Description | Type | Default | Required |
 |------|-------------|------|---------|:--------:|
-| <a name="input_dns_nameservers"></a> [dns\_nameservers](#input\_dns\_nameservers) | DNS servers to be used | `list(string)` | <pre>[<br>  "188.93.16.19",<br>  "188.93.17.19"<br>]</pre> | no |
+| <a name="input_dns_nameservers"></a> [dns\_nameservers](#input\_dns\_nameservers) | DNS servers to be used, selectel dns is default | `list(string)` | <pre>[<br>  "188.93.16.19",<br>  "188.93.17.19"<br>]</pre> | no |
 | <a name="input_enable_dhcp"></a> [enable\_dhcp](#input\_enable\_dhcp) | DHCP enable flag | `bool` | `false` | no |
 | <a name="input_image_name"></a> [image\_name](#input\_image\_name) | n/a | `list(string)` | <pre>[<br>  "Ubuntu 20.04 LTS 64-bit"<br>]</pre> | no |
 | <a name="input_network_name"></a> [network\_name](#input\_network\_name) | Network name to be created | `string` | `"network_1"` | no |
-| <a name="input_os_project_name"></a> [os\_project\_name](#input\_os\_project\_name) | Name of OpenStack project | `string` | n/a | yes |
 | <a name="input_os_region"></a> [os\_region](#input\_os\_region) | Region where network will be created | `string` | n/a | yes |
 | <a name="input_os_zone"></a> [os\_zone](#input\_os\_zone) | OS zone to be used | `string` | n/a | yes |
 | <a name="input_router_external_net_name"></a> [router\_external\_net\_name](#input\_router\_external\_net\_name) | Name of external network to be used | `string` | `"external-network"` | no |
@@ -51,5 +49,8 @@
 
 ## Outputs
 
-No outputs.
-<!-- END_TF_DOCS -->
\ No newline at end of file
+| Name | Description |
+|------|-------------|
+| <a name="output_nat_net_id"></a> [nat\_net\_id](#output\_nat\_net\_id) | n/a |
+| <a name="output_nat_sub_id"></a> [nat\_sub\_id](#output\_nat\_sub\_id) | n/a |
+| <a name="output_vm_port_id"></a> [vm\_port\_id](#output\_vm\_port\_id) | n/a |
Index: modules/floatingip/main.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>resource \"openstack_networking_floatingip_v2\" \"floatingip_1\" {\n  pool = var.pool\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/floatingip/main.tf b/modules/floatingip/main.tf
--- a/modules/floatingip/main.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/floatingip/main.tf	(date 1703668107445)
@@ -1,3 +1,4 @@
 resource "openstack_networking_floatingip_v2" "floatingip_1" {
-  pool = var.pool
+  pool   = var.pool
+  region = var.region
 }
Index: modules/keypair/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_openstack\"></a> [openstack](#provider\\_openstack) | >= 1.46.0 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| openstack_compute_keypair_v2.keypair_1 | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_keypair_name\"></a> [keypair\\_name](#input\\_keypair\\_name) | n/a | `string` | `\"keypair_1\"` | no |\n| <a name=\"input_keypair_public_key\"></a> [keypair\\_public\\_key](#input\\_keypair\\_public\\_key) | n/a | `string` | n/a | yes |\n| <a name=\"input_os_region\"></a> [os\\_region](#input\\_os\\_region) | Region of openstack | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_keypair_id\"></a> [keypair\\_id](#output\\_keypair\\_id) | ID созданной KeyPair |\n| <a name=\"output_keypair_name\"></a> [keypair\\_name](#output\\_keypair\\_name) | Имя созданной KeyPair |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/keypair/README.md b/modules/keypair/README.md
--- a/modules/keypair/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/keypair/README.md	(date 1703674863903)
@@ -3,13 +3,13 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | >= 1.46.0 |
+| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.53.0 |
 
 ## Modules
 
@@ -19,7 +19,7 @@
 
 | Name | Type |
 |------|------|
-| openstack_compute_keypair_v2.keypair_1 | resource |
+| [openstack_compute_keypair_v2.keypair_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/compute_keypair_v2) | resource |
 
 ## Inputs
 
Index: modules/volume/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n| <a name=\"requirement_random\"></a> [random](#requirement\\_random) | >= 3.3.2 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_openstack\"></a> [openstack](#provider\\_openstack) | >= 1.46.0 |\n| <a name=\"provider_random\"></a> [random](#provider\\_random) | >= 3.3.2 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| openstack_blockstorage_volume_v3.volume_1 | resource |\n| random_string.random | resource |\n| openstack_images_image_v2.image_1 | data source |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_image_name\"></a> [image\\_name](#input\\_image\\_name) | Root image name | `string` | `\"Ubuntu 20.04 LTS 64-bit\"` | no |\n| <a name=\"input_image_visibility\"></a> [image\\_visibility](#input\\_image\\_visibility) | Image visibility | `string` | `\"public\"` | no |\n| <a name=\"input_os_zone\"></a> [os\\_zone](#input\\_os\\_zone) | OS zone to be used | `string` | n/a | yes |\n| <a name=\"input_server_root_disk_gb\"></a> [server\\_root\\_disk\\_gb](#input\\_server\\_root\\_disk\\_gb) | Root disk size | `number` | `40` | no |\n| <a name=\"input_server_volume_type\"></a> [server\\_volume\\_type](#input\\_server\\_volume\\_type) | Disk type to be used | `string` | `\"fast\"` | no |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_image_id\"></a> [image\\_id](#output\\_image\\_id) | ID of image used |\n| <a name=\"output_volume_id\"></a> [volume\\_id](#output\\_volume\\_id) | Created volume ID |\n| <a name=\"output_volume_name\"></a> [volume\\_name](#output\\_volume\\_name) | Name of created volume |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/volume/README.md b/modules/volume/README.md
--- a/modules/volume/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/volume/README.md	(date 1703674955683)
@@ -3,14 +3,14 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
 | <a name="requirement_random"></a> [random](#requirement\_random) | >= 3.3.2 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | >= 1.46.0 |
+| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.53.0 |
 | <a name="provider_random"></a> [random](#provider\_random) | >= 3.3.2 |
 
 ## Modules
@@ -21,9 +21,9 @@
 
 | Name | Type |
 |------|------|
-| openstack_blockstorage_volume_v3.volume_1 | resource |
-| random_string.random | resource |
-| openstack_images_image_v2.image_1 | data source |
+| [openstack_blockstorage_volume_v3.volume_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/blockstorage_volume_v3) | resource |
+| [random_string.random](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/string) | resource |
+| [openstack_images_image_v2.image_1](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/data-sources/images_image_v2) | data source |
 
 ## Inputs
 
Index: modules/s3/s3-bucket/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n    http-full = {\n      source  = \"salrashid123/http-full\"\n      version = \">= 1.3.1\"\n    }\n\n    terracurl = {\n      source  = \"devops-rob/terracurl\"\n      version = \">= 1.0.1\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/s3/s3-bucket/versions.tf b/modules/s3/s3-bucket/versions.tf
--- a/modules/s3/s3-bucket/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/s3/s3-bucket/versions.tf	(date 1703609108013)
@@ -2,7 +2,7 @@
   required_providers {
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
     http-full = {
       source  = "salrashid123/http-full"
Index: modules/s3/s3-credentials/vars.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>variable \"os_username\" {\n  type        = string\n  description = \"Логин пользователя МИНИМУМ с ролью Администратор пользователей. Именем этого пользователя будут выданы ключи от S3\"\n}\n\nvariable \"os_password\" {\n  type        = string\n  description = \"Пароль пользователя МИНИМУМ с ролью Администратор пользователей. Именем этого пользователя будут выданы ключи от S3\"\n}\n\nvariable \"os_user_id\" {\n  type        = string\n  description = \"ID пользователя, которому надо выдать ключи S3\"\n}\n\nvariable \"os_project_id\" {\n  type        = string\n  description = \"ID проекта, в котором находится бакет\"\n}\n\nvariable \"os_account\" {\n  type        = string\n  default     = \"122972\"\n  description = \"ID аккаунта\"\n}\n\n\nvariable \"credentials_name\" {\n  default     = \"CMLP\"\n  type        = string\n  description = \"Название создаваемых кред для S3\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/s3/s3-credentials/vars.tf b/modules/s3/s3-credentials/vars.tf
--- a/modules/s3/s3-credentials/vars.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/s3/s3-credentials/vars.tf	(date 1703667345542)
@@ -20,13 +20,10 @@
 
 variable "os_account" {
   type        = string
-  default     = "122972"
   description = "ID аккаунта"
 }
 
-
 variable "credentials_name" {
-  default     = "CMLP"
   type        = string
   description = "Название создаваемых кред для S3"
 }
Index: modules/volume/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n    random = {\n      source  = \"hashicorp/random\"\n      version = \">= 3.3.2\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/volume/versions.tf b/modules/volume/versions.tf
--- a/modules/volume/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/volume/versions.tf	(date 1703609108022)
@@ -2,7 +2,7 @@
   required_providers {
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
     random = {
       source  = "hashicorp/random"
Index: modules/s3/s3-credentials/main.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>module \"selectel_token\" {\n  source      = \"../../selectel-token\"\n  os_account  = var.os_account\n  os_password = var.os_password\n  os_username = var.os_username\n}\n\nresource \"terracurl_request\" \"s3_credentials\" {\n  name         = \"vault-mount\"\n  url          = \"https://api.selectel.ru/iam/v1/service_users/${var.os_user_id}/credentials\"\n  method       = \"POST\"\n  request_body = <<EOF\n    { \n      \"name\": \"${var.credentials_name}\", \n      \"project_id\": \"${var.os_project_id}\" }\"\n    }\n    EOF\n\n  headers = {\n    \"Content-Type\" = \"application/json\"\n    \"X-Auth-Token\" = module.selectel_token.account_token\n    \"Accept\"       = \"application/json\"\n  }\n\n  response_codes = [\n    201\n  ]\n\n  lifecycle {\n    ignore_changes = [headers]\n  }\n}\n\nlocals {\n  s3_credentials_responce = jsondecode(terracurl_request.s3_credentials.response)\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/s3/s3-credentials/main.tf b/modules/s3/s3-credentials/main.tf
--- a/modules/s3/s3-credentials/main.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/s3/s3-credentials/main.tf	(date 1703667345549)
@@ -1,8 +1,8 @@
 module "selectel_token" {
-  source      = "../../selectel-token"
-  os_account  = var.os_account
-  os_password = var.os_password
-  os_username = var.os_username
+  source              = "../../selectel-token"
+  os_account          = var.os_account
+  os_password         = var.os_password
+  os_username         = var.os_username
 }
 
 resource "terracurl_request" "s3_credentials" {
@@ -10,8 +10,8 @@
   url          = "https://api.selectel.ru/iam/v1/service_users/${var.os_user_id}/credentials"
   method       = "POST"
   request_body = <<EOF
-    { 
-      "name": "${var.credentials_name}", 
+    {
+      "name": "${var.credentials_name}",
       "project_id": "${var.os_project_id}" }"
     }
     EOF
Index: modules/flavor/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    openstack = {\n      source  = \"terraform-provider-openstack/openstack\"\n      version = \">= 1.46.0\"\n    }\n  }\n  required_version = \">= 1.5.0\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/flavor/versions.tf b/modules/flavor/versions.tf
--- a/modules/flavor/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/flavor/versions.tf	(date 1703609108025)
@@ -2,7 +2,7 @@
   required_providers {
     openstack = {
       source  = "terraform-provider-openstack/openstack"
-      version = ">= 1.46.0"
+      version = "1.53.0"
     }
   }
   required_version = ">= 1.5.0"
Index: modules/s3/s3-bucket/vars.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>variable \"s3_bucket_name\" {\n  type = string\n}\n\nvariable \"os_account\" {\n  type        = string\n  description = \"Account ID\"\n  default     = \"122972\"\n}\n\nvariable \"os_region\" {\n  type        = string\n  description = \"Region where network will be created\"\n  default     = \"ru-1\"\n}\n\nvariable \"os_username\" {\n  type        = string\n  description = \"Login to be used\"\n}\n\nvariable \"os_password\" {\n  type        = string\n  description = \"Password of user\"\n\n}\n\nvariable \"os_auth_url\" {\n  type        = string\n  default     = \"https://cloud.api.selcloud.ru/identity/v3\"\n  description = \"Auth endpoint\"\n}\n\n\nvariable \"os_project_id\" {\n  description = \"ID of project, where bucket will be created\"\n  type        = string\n}\n\n\nvariable \"os_project_name\" {\n  description = \"ID of project, where bucket will be created\"\n  type        = string\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/s3/s3-bucket/vars.tf b/modules/s3/s3-bucket/vars.tf
--- a/modules/s3/s3-bucket/vars.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/s3/s3-bucket/vars.tf	(date 1703613846211)
@@ -5,7 +5,6 @@
 variable "os_account" {
   type        = string
   description = "Account ID"
-  default     = "122972"
 }
 
 variable "os_region" {
Index: versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/versions.tf b/versions.tf
new file mode 100644
--- /dev/null	(date 1703609043364)
+++ b/versions.tf	(date 1703609043364)
@@ -0,0 +1,13 @@
+terraform {
+  required_providers {
+    selectel = {
+      source  = "selectel/selectel"
+      version = "4.0.2"
+    }
+    openstack = {
+      source  = "terraform-provider-openstack/openstack"
+      version = "1.53.0"
+    }
+  }
+  required_version = ">= 1.0.0"
+}
Index: vars.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/vars.tf b/vars.tf
new file mode 100644
--- /dev/null	(date 1703605935414)
+++ b/vars.tf	(date 1703605935414)
@@ -0,0 +1,22 @@
+# Selectel provider vars
+variable "selectel_domain_name" {
+  type        = string
+  description = "ID Selectel аккаунта"
+}
+
+variable "selectel_user_admin_user" {
+  type        = string
+  description = "Имя сервисного пользователя, необходимо создать через панель my.selectel"
+}
+
+variable "selectel_user_admin_password" {
+  type        = string
+  description = "Пароль от сервисного пользователя"
+}
+
+# Openstack provider vars
+variable "os_auth_url" {
+  type        = string
+  default     = "https://cloud.api.selcloud.ru/identity/v3"
+  description = "URL до openstack api"
+}
Index: modules/flavor/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_terraform\"></a> [terraform](#requirement\\_terraform) | >= 1.5.0 |\n| <a name=\"requirement_openstack\"></a> [openstack](#requirement\\_openstack) | >= 1.46.0 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_openstack\"></a> [openstack](#provider\\_openstack) | >= 1.46.0 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| [openstack_compute_flavor_v2.flavor](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs/resources/compute_flavor_v2) | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_flavor_is_public\"></a> [flavor\\_is\\_public](#input\\_flavor\\_is\\_public) | Make flavor public | `bool` | `false` | no |\n| <a name=\"input_flavor_local_disk_gb\"></a> [flavor\\_local\\_disk\\_gb](#input\\_flavor\\_local\\_disk\\_gb) | Local disk size in GB | `number` | `0` | no |\n| <a name=\"input_flavor_name\"></a> [flavor\\_name](#input\\_flavor\\_name) | Flavor name | `string` | `\"flavor\"` | no |\n| <a name=\"input_flavor_ram_mb\"></a> [flavor\\_ram\\_mb](#input\\_flavor\\_ram\\_mb) | RAM in MB in flavor | `number` | `2048` | no |\n| <a name=\"input_flavor_vcpus\"></a> [flavor\\_vcpus](#input\\_flavor\\_vcpus) | CPUs in flavor | `number` | `2` | no |\n| <a name=\"input_os_region\"></a> [os\\_region](#input\\_os\\_region) | Region of openstack | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_flavor_id\"></a> [flavor\\_id](#output\\_flavor\\_id) | n/a |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/flavor/README.md b/modules/flavor/README.md
--- a/modules/flavor/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/flavor/README.md	(date 1703674836211)
@@ -3,13 +3,13 @@
 | Name | Version |
 |------|---------|
 | <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
-| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | >= 1.46.0 |
+| <a name="requirement_openstack"></a> [openstack](#requirement\_openstack) | 1.53.0 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | >= 1.46.0 |
+| <a name="provider_openstack"></a> [openstack](#provider\_openstack) | 1.53.0 |
 
 ## Modules
 
@@ -19,7 +19,7 @@
 
 | Name | Type |
 |------|------|
-| [openstack_compute_flavor_v2.flavor](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/latest/docs/resources/compute_flavor_v2) | resource |
+| [openstack_compute_flavor_v2.flavor](https://registry.terraform.io/providers/terraform-provider-openstack/openstack/1.53.0/docs/resources/compute_flavor_v2) | resource |
 
 ## Inputs
 
Index: modules/craas/README.md
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>## Requirements\n\n| Name | Version |\n|------|---------|\n| <a name=\"requirement_selectel\"></a> [selectel](#requirement\\_selectel) | >= 4.0.1 |\n\n## Providers\n\n| Name | Version |\n|------|---------|\n| <a name=\"provider_selectel\"></a> [selectel](#provider\\_selectel) | >= 4.0.1 |\n\n## Modules\n\nNo modules.\n\n## Resources\n\n| Name | Type |\n|------|------|\n| [selectel_craas_registry_v1.registry_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/craas_registry_v1) | resource |\n| [selectel_craas_token_v1.token_1](https://registry.terraform.io/providers/selectel/selectel/latest/docs/resources/craas_token_v1) | resource |\n\n## Inputs\n\n| Name | Description | Type | Default | Required |\n|------|-------------|------|---------|:--------:|\n| <a name=\"input_craas_name\"></a> [craas\\_name](#input\\_craas\\_name) | Имя CRaaS | `string` | `\"registry\"` | no |\n| <a name=\"input_os_project_id\"></a> [os\\_project\\_id](#input\\_os\\_project\\_id) | ID openstack проекта | `string` | n/a | yes |\n| <a name=\"input_token_ttl\"></a> [token\\_ttl](#input\\_token\\_ttl) | Время жизни токена | `string` | n/a | yes |\n\n## Outputs\n\n| Name | Description |\n|------|-------------|\n| <a name=\"output_craas_password\"></a> [craas\\_password](#output\\_craas\\_password) | craas token |\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/craas/README.md b/modules/craas/README.md
--- a/modules/craas/README.md	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/craas/README.md	(date 1703674729642)
@@ -2,13 +2,13 @@
 
 | Name | Version |
 |------|---------|
-| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.1 |
+| <a name="requirement_selectel"></a> [selectel](#requirement\_selectel) | >= 4.0.2 |
 
 ## Providers
 
 | Name | Version |
 |------|---------|
-| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.1 |
+| <a name="provider_selectel"></a> [selectel](#provider\_selectel) | >= 4.0.2 |
 
 ## Modules
 
Index: providers.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/providers.tf b/providers.tf
new file mode 100644
--- /dev/null	(date 1703612709463)
+++ b/providers.tf	(date 1703612709463)
@@ -0,0 +1,15 @@
+provider "selectel" {
+  domain_name = var.selectel_domain_name
+  username    = var.selectel_user_admin_user
+  password    = var.selectel_user_admin_password
+}
+
+provider "openstack" {
+  auth_url            = var.os_auth_url
+  user_name           = module.project-with-user.user_name
+  tenant_name         = module.project-with-user.project_name
+  password            = module.project-with-user.user_password
+  project_domain_name = var.selectel_domain_name
+  user_domain_name    = var.selectel_domain_name
+  region              = "ru-9"
+}
Index: modules/craas/versions.tf
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>terraform {\n  required_providers {\n    selectel = {\n      source  = \"selectel/selectel\"\n      version = \">= 4.0.1\"\n    }\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/modules/craas/versions.tf b/modules/craas/versions.tf
--- a/modules/craas/versions.tf	(revision f52b2b7f8d4f353d6831ffe7a29d08cb21ec1576)
+++ b/modules/craas/versions.tf	(date 1703608624705)
@@ -2,7 +2,7 @@
   required_providers {
     selectel = {
       source  = "selectel/selectel"
-      version = ">= 4.0.1"
+      version = ">= 4.0.2"
     }
   }
 }
